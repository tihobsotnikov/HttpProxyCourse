# Руководство по тестированию GUI

## Предварительная настройка

1. **Установка PostgreSQL и создание базы данных:**
```bash
sudo apt-get install postgresql postgresql-contrib
sudo service postgresql start
sudo -u postgres createdb course_db
sudo -u postgres psql -d course_db -f data/schema.sql
```

2. **Компиляция проекта:**
```bash
qmake CourseProject.pro
make
```

## Тестирование функциональности

### 1. Запуск приложения
```bash
./bin/CourseProject
```

При первом запуске приложение:
- Подключится к базе данных
- Проверит наличие файла `data/course.bin`
- Если файл отсутствует, загрузит курс из `data/course_source.json` и создаст зашифрованный бинарный файл
- Откроет окно авторизации

### 2. Тестирование системы авторизации

**Регистрация нового пользователя:**
1. Нажмите кнопку "Регистрация"
2. Введите логин (минимум 3 символа)
3. Введите пароль (минимум 4 символа)
4. Пользователь будет зарегистрирован с ролью "student"

**Создание администратора:**
Для тестирования панели администратора нужно создать пользователя с ролью "admin" через SQL:
```sql
INSERT INTO users (login, password_hash, role) 
VALUES ('admin', '240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9', 'admin');
-- Пароль: "admin" (хеш SHA-256)
```

**Авторизация:**
1. Введите логин и пароль
2. Нажмите "Войти"
3. При успешной авторизации откроется соответствующий интерфейс

### 3. Тестирование панели администратора

**Вкладка "Студенты":**
1. Просмотр списка всех пользователей
2. Использование поиска по логину
3. Генерация отчета (создается файл `Report_YYYYMMDD_HHMMSS.txt`)

**Вкладка "Редактор курса":**
1. Выбор главы из списка слева
2. Редактирование заголовка и содержимого
3. Сохранение изменений (обновляется файл `data/course.bin`)

### 4. Проверка безопасности

**Хеширование паролей:**
- Пароли хешируются с использованием SHA-256
- В базе данных хранятся только хеши, не исходные пароли

**Шифрование данных курса:**
- Содержимое курса шифруется XOR алгоритмом
- Бинарный файл содержит магическое число для проверки целостности

## Ожидаемые результаты

1. **Успешная авторизация** администратора открывает AdminWindow с двумя вкладками
2. **Успешная авторизация** студента показывает сообщение о том, что интерфейс в разработке
3. **Поиск студентов** фильтрует список в реальном времени
4. **Генерация отчета** создает текстовый файл с информацией о пользователях
5. **Редактирование курса** сохраняет изменения в зашифрованный файл
6. **Неверные учетные данные** показывают предупреждение

## Возможные проблемы

1. **Ошибка подключения к БД:** Проверьте, что PostgreSQL запущен и база данных создана
2. **Отсутствие файла курса:** Убедитесь, что `data/course_source.json` существует
3. **Ошибки компиляции:** Проверьте установку Qt5 и всех необходимых модулей
4. **Проблемы с правами:** Убедитесь, что приложение может создавать файлы в текущей директории

## Логи и отладка

Приложение выводит отладочную информацию в консоль:
- Статус подключения к БД
- Информацию о загрузке курса
- Результаты авторизации
- Ошибки и предупреждения

Для получения подробных логов запустите приложение из терминала.